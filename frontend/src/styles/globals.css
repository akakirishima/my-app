@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Layout --- */
:root { --gap: 24px; --card-r: 16px; }
.page      { min-height:100vh; background:transparent; display:flex; flex-direction:column; gap:var(--gap); padding:24px; max-width:1100px; margin:0 auto; }
.two-col   { display:grid; grid-template-columns:1fr 1fr; gap:var(--gap); align-items:stretch; }
@media (max-width: 640px) { .two-col { grid-template-columns:1fr; } }

/* --- Card --- */
.card{
  border-radius: var(--card-r);
  padding: 16px;
  background:#fff;
  box-shadow: 0 6px 24px rgba(0,0,0,.08);
}
.card--glass{
  background: rgba(255,255,255,0.14);
  border: 1px solid rgba(255,255,255,0.35);
  -webkit-backdrop-filter: blur(18px) saturate(140%);
  backdrop-filter: blur(18px) saturate(140%);
  box-shadow: 0 10px 30px rgba(0,0,0,0.10), inset 0 1px 0 rgba(255,255,255,0.25);
}
.hover-lift { transition: transform .2s ease, box-shadow .2s ease; }
.hover-lift:hover { transform: translateY(-2px); box-shadow: 0 16px 40px rgba(0,0,0,.15); }

/* --- Typography helpers --- */
.card__title{font-size:18px;font-weight:600;margin:0 0 8px;letter-spacing:.02em}
.small{font-size:12px;color:#6b7280}
.large{font-size:24px}

.wx-icon-img { width: 56px; height: 56px; object-fit: contain; display: inline-block; }

/* === 天気テーマ共通 === */
.sky {
  position: relative;
  min-height: 100vh;
  --bg-from: #bcdcff;
  --bg-to:   #eaf6ff;
  --bg-angle: 180deg; /* JSから動的に変える */
}
.sky::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  background: linear-gradient(var(--bg-angle), var(--bg-from), var(--bg-to));
  transition: background 600ms ease;
}

/* コンテンツはオーバーレイの上に */
.sky-content { position: relative; z-index: 0; }

/* === 昼パレット（青系） === */
.sky.day-clear   { --bg-from:#8ec5ff; --bg-to:#e6f4ff; }
.sky.day-cloudy  { --bg-from:#94a8c6; --bg-to:#cfe0f5; }
.sky.day-rain    { --bg-from:#4b7db5; --bg-to:#8fb2d9; }
.sky.day-snow    { --bg-from:#dfefff; --bg-to:#f5fbff; }
.sky.day-thunder { --bg-from:#274260; --bg-to:#627da0; }

/* === 夜パレット（青系） === */
.sky.night-clear   { --bg-from:#07162e; --bg-to:#0f2450; }
.sky.night-cloudy  { --bg-from:#0d1a33; --bg-to:#1d2b48; }
.sky.night-rain    { --bg-from:#0a162b; --bg-to:#172d4a; }
.sky.night-snow    { --bg-from:#15243a; --bg-to:#263b5a; }
.sky.night-thunder { --bg-from:#0a1426; --bg-to:#2d3f66; }

/* === 明け方（青系） === */
.sky.dawn-clear   { --bg-from:#77b5ff; --bg-to:#d5ecff; }
.sky.dawn-cloudy  { --bg-from:#7f94b3; --bg-to:#cbd9ed; }
.sky.dawn-rain    { --bg-from:#3e5477; --bg-to:#7b92b5; }
.sky.dawn-snow    { --bg-from:#e3f0ff; --bg-to:#f4faff; }
.sky.dawn-thunder { --bg-from:#1f2a44; --bg-to:#61779f; }

/* === 夕暮れ（青系） === */
.sky.dusk-clear   { --bg-from:#6aa8ff; --bg-to:#cfe6ff; }
.sky.dusk-cloudy  { --bg-from:#6f81a3; --bg-to:#b7c9e6; }
.sky.dusk-rain    { --bg-from:#334766; --bg-to:#6f86a7; }
.sky.dusk-snow    { --bg-from:#dcebfb; --bg-to:#f0f7ff; }
.sky.dusk-thunder { --bg-from:#1b253a; --bg-to:#556a8f; }

/* === 星（夜だけ） === */
.sky-stars {
  position: fixed; inset: 0; z-index: -1; pointer-events: none;
  background-image: radial-gradient(#ffffff 1px, transparent 1.5px);
  background-size: 2px 2px;
  opacity: .55;
  animation: twinkle 4s steps(2) infinite;
}
.sky:not(.night-clear):not(.night-cloudy):not(.night-rain):not(.night-snow):not(.night-thunder) .sky-stars {
  display: none;
}
@keyframes twinkle { 50% { opacity: .3; } }

/* === 雨（雨/雷） === */
.sky-rain {
  position: fixed; inset: -20% -20% 0 -20%; z-index: -1; pointer-events: none;
  background-image: repeating-linear-gradient(
    120deg,
    rgba(255,255,255,.35) 0 2px,
    rgba(255,255,255,0) 2px 6px
  );
  animation: rainMove 700ms linear infinite;
}
.sky:not(.day-rain):not(.night-rain):not(.day-thunder):not(.night-thunder):not(.dawn-rain):not(.dusk-rain) .sky-rain { display: none; }
@keyframes rainMove { to { background-position: -90px 180px; } }

/* === 雪（雪） === */
.sky-snow {
  position: fixed; inset: -10% 0 0 0; z-index: -1; pointer-events: none;
  background-image:
    radial-gradient(#fff 1.4px, transparent 2px),
    radial-gradient(#fff 2px, transparent 2.6px);
  background-size: 6px 6px, 10px 10px;
  animation: snowFall 10s linear infinite;
  opacity: .8;
}
.sky:not(.day-snow):not(.night-snow):not(.dawn-snow):not(.dusk-snow) .sky-snow { display: none; }
@keyframes snowFall { to { background-position: 0 600px, 0 400px; } }

/* === 雷（フラッシュ） === */
.sky-flash {
  position: fixed; inset: 0; z-index: -1; pointer-events: none;
  background: rgba(255,255,255,0);
  animation: flash 6s infinite;
}
.sky:not(.day-thunder):not(.night-thunder):not(.dawn-thunder):not(.dusk-thunder) .sky-flash { display: none; }
@keyframes flash {
  0%, 97%, 100% { background: rgba(255,255,255,0); }
  98%            { background: rgba(255,255,255,.45); }
  99%            { background: rgba(255,255,255,0); }
}
/* ===== Cloud layer (for cards & panels) ===== */
.card--with-clouds { position: relative; overflow: hidden; }
.card--with-clouds > * { position: relative; z-index: 1; }

.clouds {
  position: absolute;
  inset: 0;
  pointer-events: none;   /* マップやボタンの操作を妨げない */
  overflow: hidden;
  z-index: 0;
  filter: drop-shadow(0 8px 8px rgba(0,0,0,.04));
}

/* ふわっとした雲（3つの楕円を重ねて雲っぽく） */
.clouds__item {
  position: absolute;
  top: var(--top);
  left: -30%;
  width: 160px;          /* 親サイズに依らない固定幅 */
  height: 80px;
  opacity: .55;
  transform: scale(var(--s, 1));
  animation: cloud-drift var(--d, 40s) linear infinite;
  animation-delay: var(--delay, 0s);
  background:
    radial-gradient(ellipse at 30% 55%, rgba(255,255,255,.95), rgba(255,255,255,.55) 60%, rgba(255,255,255,0) 61%),
    radial-gradient(ellipse at 60% 45%, rgba(255,255,255,.9), rgba(255,255,255,.5) 60%, rgba(255,255,255,0) 61%),
    radial-gradient(ellipse at 45% 50%, rgba(255,255,255,1), rgba(255,255,255,.6) 60%, rgba(255,255,255,0) 61%);
  filter: blur(.3px);
  border-radius: 50px;
}

@keyframes cloud-drift {
  from { transform: translateX(0)    scale(var(--s, 1)); }
  to   { transform: translateX(170%) scale(var(--s, 1)); }
}